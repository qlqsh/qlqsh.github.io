<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[刘明个人博客]]></title>
  <link href="http://qlqsh.github.io/atom.xml" rel="self"/>
  <link href="http://qlqsh.github.io/"/>
  <updated>2015-09-11T23:03:06+08:00</updated>
  <id>http://qlqsh.github.io/</id>
  <author>
    <name><![CDATA[刘明]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[使用CocoaPods做iOS程序包依赖管理]]></title>
    <link href="http://qlqsh.github.io/blog/2015/09/11/shi-yong-cocoapodszuo-ioscheng-xu-bao-yi-lai-guan-li/"/>
    <updated>2015-09-11T22:28:03+08:00</updated>
    <id>http://qlqsh.github.io/blog/2015/09/11/shi-yong-cocoapodszuo-ioscheng-xu-bao-yi-lai-guan-li</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress附加功能]]></title>
    <link href="http://qlqsh.github.io/blog/2013/05/23/octopressfu-jia-gong-neng/"/>
    <updated>2013-05-23T01:48:00+08:00</updated>
    <id>http://qlqsh.github.io/blog/2013/05/23/octopressfu-jia-gong-neng</id>
    <content type="html"><![CDATA[<h2>评论功能</h2>

<p>Octopress本身默认支持disqus，打开<code>_config.yml</code>，找到disqus相关配置项，修改即可：</p>

<pre><code>disqus_short_name: your_disqus_short_name
disqus_show_comment_count: true
</code></pre>

<p>不过要想使用还需要一个<a href="http://www.disqus.com">disqus</a>帐号。</p>

<p>我觉得没什么大用处，不加入评论功能了。</p>

<!--more-->


<h2>分类功能</h2>

<p>保存以下代码到plugins/category_list_tag.rb：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">CategoryListTag</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="n">categories</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span><span class="o">.</span><span class="n">keys</span>
</span><span class='line'>      <span class="n">categories</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
</span><span class='line'>        <span class="n">posts_in_category</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span><span class="o">[</span><span class="n">category</span><span class="o">].</span><span class="n">size</span>
</span><span class='line'>        <span class="n">category_dir</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;category_dir&#39;</span><span class="o">]</span>
</span><span class='line'>        <span class="n">category_url</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">category_dir</span><span class="p">,</span> <span class="n">category</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/_|\P{Word}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/-{2,}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">downcase</span><span class="p">)</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;li class=&#39;category&#39;&gt;&lt;a href=&#39;/</span><span class="si">#{</span><span class="n">category_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2"> (</span><span class="si">#{</span><span class="n">posts_in_category</span><span class="si">}</span><span class="s2">)&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">html</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;category_list&#39;</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">CategoryListTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个插件会向liquid注册一个名为category_list的tag，该tag就是以li的形式将站点所有的category组织起来。如果要将category加入到侧边导航栏，需要增加一个aside。</p>

<p>复制以下代码到source/_includes/asides/category_list.html。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Categories<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    {% category_list %}
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>配置侧边栏需要修改_config.yml文件，修改其default_asides项：</p>

<pre><code>default_asides: [asides/category_list.html]
</code></pre>

<p>注意，不支持中文。要想显示<code>{% category_list %}</code>，需要在<code>{% category_list %}</code>加入<code>raw</code>和<code>endraw</code>。</p>

<h2>一些简单配置</h2>

<ul>
<li>在<code>_config.yml</code>中，把Read on改为“继续阅读”。</li>
<li>在右侧加入<code>Github repositories</code>，在<code>_config.yml</code>中，把<code>github_user</code>设为Github用户名。</li>
<li>关闭Tweet，在<code>_config.yml</code>中，把<code>twitter_tweet_button</code>设为<code>false</code>。</li>
</ul>


<h2>解决"WARN Could Not Determine Content-lenth of Response Boby"错误</h2>

<p>在使用<code>Rake preview</code>时，观察到会出现下面错误</p>

<blockquote><p>WARN Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true</p></blockquote>

<p>查询了一番，终于找到解决方案，记录一下！</p>

<pre><code>sudo vim ~/.rvm/rubies/ruby-1.9.3-p429/lib/ruby/1.9.1/webrick/httpresponse.rb
</code></pre>

<p>找到下面代码</p>

<pre><code>if chunked? || @header['content-length']
</code></pre>

<p>替换为</p>

<pre><code>if chunked? || @header['content-length'] || @status == 304 || @status == 204
</code></pre>

<p>重启<code>rake preview</code></p>

<p>参考文献：</p>

<p><a href="http://www.yanjiuyanjiu.com/blog/20130402/">http://www.yanjiuyanjiu.com/blog/20130402/</a></p>

<h2>遇到的问题</h2>

<p>使用Gist的时候，行号不能对齐，很不美观。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用Octopress建立博客]]></title>
    <link href="http://qlqsh.github.io/blog/2013/05/22/shi-yong-octopressjian-li-bo-ke/"/>
    <updated>2013-05-22T13:38:00+08:00</updated>
    <id>http://qlqsh.github.io/blog/2013/05/22/shi-yong-octopressjian-li-bo-ke</id>
    <content type="html"><![CDATA[<p>由于墙的关系，可能会造成一些乱七八糟的错误。最好有个稳定的VPN。</p>

<p>这次安装是最简单，也是最舒心，中途没有碰到什么问题，非常顺。</p>

<!--more-->


<h2>安装git</h2>

<ol>
<li><p>下载git安装程序，安装。</p></li>
<li><p>注册Github帐号，建立Repository。</p>

<blockquote><p>必须使用username.github.com建立仓库名</p></blockquote></li>
<li><p>建立SSH Keys，添加到GitHub的SSH公钥管理中。</p>

<p>这里我使用单帐户。</p>

<pre><code>ssh-keygen                      # 建立默认公钥/私钥对文件
cat ~/.ssh/id_rsa.pub | pbcopy  # 拷贝公钥到剪贴板
</code></pre>

<p>然后粘贴到GitHub的SSH公钥管理中。多GitHub账户情况，处理方式略有不同。</p></li>
<li><p>测试。</p>

<pre><code>ssh -T git@github.com
</code></pre>

<p>会返回一条欢迎信息。</p></li>
<li><p>设置个人信息。</p>

<pre><code>git config --global user.name "用户名"
git config --global user.email "邮箱"
</code></pre></li>
</ol>


<p>参考文献：</p>

<p><a href="http://www.worldhello.net/gotgithub/02-join-github/010-account-setup.html">http://www.worldhello.net/gotgithub/02-join-github/010-account-setup.html</a></p>

<h2>安装rvm</h2>

<p>这里使用单用户模式。</p>

<pre><code>bash &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )
</code></pre>

<p>安装方式有两种（单用户模式、多用户模式），区别是是否拥有root权限。</p>

<blockquote><p>单用户路径    ~/.rvm/</p>

<p>多用户路径    /usr/local/rvm</p></blockquote>

<p>单用户安装方式：</p>

<pre><code>bash &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )
</code></pre>

<p>多用户安装方式：</p>

<pre><code>sudo bash &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )
</code></pre>

<p>参考文献：</p>

<p><a href="http://kingplesk.org/2011/11/mac-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85ruby-rvm/">http://kingplesk.org/2011/11/mac-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85ruby-rvm/</a></p>

<p><a href="http://octopress.org/docs/setup/rvm/">http://octopress.org/docs/setup/rvm/</a></p>

<h2>安装ruby</h2>

<pre><code>sudo rvm install 1.9.3  # 安装
rvm use 1.9.3           # 切换ruby版本
ruby -v                 # 确认
rvm use 1.9.3 --default # 设定ruby默认版本
</code></pre>

<p>参考文献：</p>

<p><a href="http://ruby-china.org/topics/2822">http://ruby-china.org/topics/2822</a></p>

<h2>安装Octopress</h2>

<pre><code>git clone git://github.com/imathis/octopress.git liuming.me # 拷贝Octopress到本地文件夹
cd liuming.me                                               # 使用的RVM的话，回答“yes”就行
</code></pre>

<p>提示了一大段，选yes，接着下面3个命令就OK了。</p>

<pre><code>sudo gem install bundler
bundle install              # 包安装
rake install                # Octopress默认主题安装
</code></pre>

<h2>部署到Github Pages</h2>

<pre><code>rake setup_github_pages # 配置Github项目地址，接下来提示输入URL
rake generate           # 生成静态文件
rake deploy             # 部署到Github
</code></pre>

<p>备份source文件夹到github，这样就有了文章md源文件的版本管理。</p>

<pre><code>git add .
git commit -m "第一次提交"
git push origin source
</code></pre>

<p>Octopress常用命令：</p>

<pre><code>rake new_post["File Name"]  # 建立新文章，可以使用中文，但不能带标点
rake preview                # 站点预览，动态生成，http://127.0.0.1:4000
rake generate               # 生成静态文件
rake deploy                 # 部署到Github
</code></pre>

<p>注意，如果以后要从另一个电脑pull源码来新电脑，用如下命令：</p>

<pre><code>cd your_local_octopress_directory
cd _deploy
git pull origin master
cd ..
git pull origin source
</code></pre>

<p>只要记住<code>your_local_octopress_directory</code>对应的的<code>remote source branch</code>，而<code>_deploy</code>对应的是<code>remote master branch</code>即可。</p>

<p>如果你是和别人合作博客，或者自己同时在好几个电脑上写博客，每次开始之前，<code>git pull origin source</code>获得最新的文件，<code>rake generate</code>生成新的页面。</p>

<p>参考文献：</p>

<p><a href="http://blog.csdn.net/janronehoo/article/details/8509356">http://blog.csdn.net/janronehoo/article/details/8509356</a></p>

<p><a href="http://blog.tinyxd.me/blog/2012/05/23/octopressan-zhuang-bi-ji/">http://blog.tinyxd.me/blog/2012/05/23/octopressan-zhuang-bi-ji/</a></p>

<p><a href="http://fancyoung.com/blog/host-to-github/">http://fancyoung.com/blog/host-to-github/</a></p>

<h2>安装中碰到的问题</h2>

<ol>
<li><p>有可能碰到ruby编译问题。必须安装Xcode，如果是4.3以后版本，必须安装Command Line Tools。</p></li>
<li><p><code>rvm use 1.9.3 --default</code>在mac下可能不管用，每次重启Terminal都会自动跳回1.8.7。可以考虑用这个命令：
<code>sudo rvm alias create default 1.9.3</code>。</p></li>
<li><p>如果报错，可以考虑加<code>sudo</code>试试。</p></li>
</ol>


<h2>其它参考资料</h2>

<p>1、Octopress搭建流程，感觉比我的更易懂。<a href="http://shengmingzhiqing.com/blog/setup-octopress-with-github-pages.html/">http://shengmingzhiqing.com/blog/setup-octopress-with-github-pages.html/</a></p>
]]></content>
  </entry>
  
</feed>
